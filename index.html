<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Countdown to</title>
    <link href="style.css" rel="stylesheet" />
  </head>
  <body>
    <form id="selection-date-form">
        <label for="selection-date">Countdown to: </label>
        <input type="datetime-local" id="selection-date" required>
        <input type="submit" value="launch">
    </form>

    <h1 id="date"></h1>
    <span id="error-message"></span>

    <main>
        <span class="highlighted-number" id="timer-day">00</span>
        <span class="highlighted-label">days</span>
        <span class="highlighted-number" id="timer-hour">00</span>
        <span class="highlighted-label">hours</span>
        <span class="highlighted-number" id="timer-minute">00</span>
        <span class="highlighted-label">minutes</span>
        <span class="highlighted-number" id="timer-second">00</span>
        <span class="highlighted-label">seconds</span>
      </div>
    </main>
  </body>

  <script src="config.js"></script>
  <script src="view.js"></script>
  <script src="script.js"></script>
  <script>
    let params = new URLSearchParams(document.location.search);
    let date = params.get(SEARCH_PARAM_DATE);
    if (date) {
      initTimer(new Date(date));
    }
    getSelection(SELECTOR_DATE_FORM).onsubmit = (event) => {
      event.preventDefault();
    
      const selectedDate = getSelectionValue(SELECTOR_DATE_INPUT);

      const url = new URL(window.location.href);
      url.searchParams.set(SEARCH_PARAM_DATE, selectedDate);
      window.location.replace(url.toString());
    };
  </script>
</html>
